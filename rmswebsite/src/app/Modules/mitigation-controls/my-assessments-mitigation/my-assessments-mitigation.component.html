

<div class="form">
    <div class="body">
      <div class="header">
        <div style="align-self:self-end;">
        <div class=" card">
          <div class=" card-header">
            <h1 class=" title">My Assessments Review</h1>
          </div>
          <div class="card-body">
  
  <div >
    <br>
    <br>
    <dx-drop-down-box style="width: 700px;"
    [dropDownOptions]="{width: '1400px'}"
    [(value)]="gridBoxValue"
    [(opened)]="isGridBoxOpened"
    [displayExpr]="gridBox_displayExpr"
    valueExpr="schedule_Assessment_id"
     [deferRendering]="false"
     label="Select Assessment"
     placeholder=" "
     [inputAttr]="{ 'aria-label': 'Owner' }"
     [showClearButton]="true"
     [dataSource]="gridDataSource"
     formControlName="Assessment_id"
     (onOptionChanged)="onGridBoxOptionChanged($event)">
        
          <div *dxTemplate="let data of 'content'">
            <dx-data-grid
            [dataSource]="gridDataSource"
            [columns]="gridColumns"
              [hoverStateEnabled]="true"
              [(selectedRowKeys)]="gridBoxValue"
                [allowColumnResizing]="true"
                  [columnAutoWidth]="true"
                  [allowColumnReordering]="true"
                  height="100%"
                  width="100%"
         
    >
        
            
    <dxo-selection mode="single"></dxo-selection>
    <dxo-filter-row [visible]="true"></dxo-filter-row>
      <dxo-scrolling mode="virtual"></dxo-scrolling>
      <dxo-header-filter [visible]="true" [allowSearch]="true">
        <dxo-search [enabled]="true"></dxo-search>
      </dxo-header-filter>
      <dxo-paging [enabled]="true" [pageSize]="10"></dxo-paging>
      <dxo-pager
      [visible]="true"
      [allowedPageSizes]="[ 10,20, 'all']"
     
      [showPageSizeSelector]="true"
     
      [showInfo]="true"
      infoText="Page {0} of  {1} ({2} items)"
      [showNavigationButtons]="true">
    </dxo-pager>

    <dxo-group-panel [visible]="true"></dxo-group-panel>
      <dxo-grouping [autoExpandAll]="true"></dxo-grouping>
  
                   </dx-data-grid>
          </div>
        </dx-drop-down-box> 
   
    
    <form [formGroup]="mitigationForm">
      <mat-horizontal-stepper [linear]="true" labelPosition="bottom" *ngIf="selectedchange" >


        <mat-step label="Select Assessment Concluded" state="phone">
         
              
           
       <br>
         <div >
          <div>
            <mat-label style="display: contents;font-size: larger;font-weight: bold;">Basic Details of Assessment
               
            </mat-label>
        </div>
      <div class="box">
        <!-- <div fxLayoutAlign="center center">
            <mat-form-field appearance="fill" class="form-field">
           <mat-label>Name of Assessment </mat-label>
           <input matInput  class="readonly-input" readonly />
          
        </mat-form-field>
      </div> -->

      <div fxLayoutAlign="center center">
        <mat-form-field appearance="fill" class="form-field">
       <mat-label>Name of Assessor </mat-label>
       <input matInput formControlName="Assessorname" class="readonly-input" readonly />
      
    </mat-form-field>
  </div>
  <div fxLayoutAlign="center center">
    <mat-form-field appearance="fill" class="form-field">
   <mat-label>Assessment Type </mat-label>
   <input matInput formControlName="type_Name"  class="readonly-input" readonly />
  
</mat-form-field>
</div>
    </div>
         

    <div class="box">
      

    <div fxLayoutAlign="center center">
      <mat-form-field appearance="fill" class="form-field">
     <mat-label>Assessment Start Date </mat-label>
     <input matInput   formControlName="startDates"  class="readonly-input" readonly />
    
  </mat-form-field>
</div>
<div fxLayoutAlign="center center">
  <mat-form-field appearance="fill" class="form-field">
 <mat-label>Assessment Due Date</mat-label>
 <input matInput   formControlName="endDates"  class="readonly-input" readonly />

</mat-form-field>
</div>
  </div>
       

  <div class="box">
    

  <!-- <div fxLayoutAlign="center center">
    <mat-form-field appearance="fill" class="form-field">
   <mat-label>Objective</mat-label>
   <input matInput  formControlName="type_Name"   class="readonly-input" readonly />
  
</mat-form-field>
</div> -->
<div fxLayoutAlign="center center">
  
</div>
</div>


<!-- <div class="box">
  <div fxLayoutAlign="center center">
      <mat-form-field appearance="fill" class="form-field">
     <mat-label>Total Time Alloted to Attempt</mat-label>
     <input matInput  class="readonly-input" readonly />
    
  </mat-form-field>
</div>

<div fxLayoutAlign="center center">
  <mat-form-field appearance="fill" class="form-field">
 <mat-label>Total Time Taken</mat-label>
 <input matInput  class="readonly-input" readonly />

</mat-form-field>
</div>
</div> -->
<br>
<br>
<div>
  <mat-label style="display: contents;font-size: larger;font-weight: bold;">Score Awarded Against :   
    <mat-button-toggle-group
    appearance="legacy"
  name="fontStyle"
  aria-label="Font Style"
 
  (change)="updateGridColumns($event.value)"
  >
  <mat-button-toggle value="3" checked>OverAll</mat-button-toggle>
    <mat-button-toggle value="1">Competency Check Level</mat-button-toggle>
    <mat-button-toggle value="2">Subject/Topic</mat-button-toggle>

</mat-button-toggle-group>
  </mat-label>
  </div>
  <br>
  <br>
  <div>
    <div *ngIf="overall">
    <dx-data-grid 
  [dataSource]="gridDataSource1"
  [showBorders]="true"
  (onExporting)="exportGrid1($event)"
  [allowColumnResizing]="true"
  [columnAutoWidth]="true"
  [allowColumnReordering]="true"
  >
  <!-- <dxi-column dataField="userID" caption="userID" [visible]="false" >
     
  </dxi-column> -->
  

<dxi-column dataField="firstname" caption="User Name">

</dxi-column>
<dxi-column dataField="total_questions" caption="Total Questions" groupName="1"  alignment="center">

</dxi-column>
<dxi-column dataField="totalQuestionsAnswered" caption="Total Answered Questions" groupName="1"  alignment="center">

</dxi-column>
<dxi-column dataField="correctAnswers" caption="Total  Questions Answerd Correctly" groupName="1"  alignment="center">

</dxi-column>
<dxi-column dataField="accuracyPercentage" caption="Overall Accuracy%â€" groupName="1"  alignment="center" >

</dxi-column>
<dxi-column dataField="days" caption="Time Taken" groupName="1"  alignment="center">

</dxi-column>
<dxi-column dataField="overallScore" caption="Over all Score"  alignment="center">

</dxi-column>

<dxi-column dataField="scoreName" caption="Score Indicator ">

</dxi-column>
<dxi-column dataField="key_Impr_Indicator_Name" caption="Key Improvement Indicator Name ">
   
</dxi-column>
<dxi-column dataField="uq_ass_schid" caption="Assessment ID"  [visible]="false">
   
</dxi-column>
<dxi-column dataField="competency_Name" caption="Competency Skill Level "  [visible]="false">
   
</dxi-column>
<dxi-column dataField="subType_Name" caption="Assessment Sub Type"  [visible]="false">
   
</dxi-column>
<dxi-column dataField="type_Name" caption="Assessment Type Name"  [visible]="false">
   
</dxi-column>
<!-- <dxi-column dataField="remarks" caption="Assessor Remarks ">
   
</dxi-column> -->
  <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
  <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
  <dxo-filter-row [visible]="true"></dxo-filter-row>
  <dxo-search-panel [visible]="true"></dxo-search-panel>
  <dxo-group-panel [visible]="true"></dxo-group-panel>
  <dxo-selection mode="single"></dxo-selection>
  <dxo-summary>
      <dxi-total-item
          column="userID"
          summaryType="count">
      </dxi-total-item>
      
  </dxo-summary>
   <dxo-export 
                [enabled]="true"
                [formats]="['xlsx', 'pdf']"
              >
              </dxo-export>
  <dxo-scrolling rowRenderingMode="virtual"> </dxo-scrolling>
  <dxo-paging [enabled]="true" [pageSize]="5"></dxo-paging>
  
  </dx-data-grid>
        
  </div>
  
  <div *ngIf="comptencyskill">
 
  
  <dx-pivot-grid
  [showColumnTotals]="false"
  [showColumnGrandTotals]="false"
  [showRowGrandTotals]="false"
  [wordWrapEnabled]="false"
  [dataSource]="compotencygridData"
  [showBorders]="true"
  
  
  >
  
  
  </dx-pivot-grid>
  
  </div>
  <div *ngIf="subjecttopic">
    <dx-pivot-grid
  [showColumnTotals]="false"
  [showColumnGrandTotals]="false"
  [showRowGrandTotals]="false"
  [wordWrapEnabled]="false"
  [dataSource]="subjecttopicgridData"
  [showBorders]="true"
  
  
  ></dx-pivot-grid>
  </div>
  </div>
     <br>
     <br>
    
     <div>
      <mat-label style="display: contents;font-size: larger;font-weight: bold;"> Question based Assessment Performance Analysis
         
      </mat-label>
     </div>

     <div>
      <dx-data-grid 
 [dataSource]="gridDataSource3"
 [showBorders]="true"
(onExporting)="exportGrid($event)"
 [wordWrapEnabled]="true"
 [allowColumnResizing]="true"
 [columnAutoWidth]="true"
 [allowColumnReordering]="true"
 >
 <!-- <dxi-column dataField="userID" caption="userID" [visible]="false" >
    
 </dxi-column> -->
 <!-- <dxi-column dataField="firstname" caption="User Name">
      
 </dxi-column> -->
 <dxi-column dataField="question_id" caption=" Question ID" [visible]="false" >
  
 </dxi-column>
 <dxi-column dataField="question" caption="Question">
 
</dxi-column>
<dxi-column dataField="correct_answer" caption="Correct Answer">
  
</dxi-column>
 <dxi-column dataField="user_Selected_Ans" caption=" User Selected Answer">
  
</dxi-column>
<dxi-column dataField="isAnswerCorrect" caption="Result for Ques">

</dxi-column>
<dxi-column dataField="checkLevelName" caption="Check-Level"  [visible]="false">

</dxi-column>
<dxi-column dataField="topicName" caption="Topic Name"  [visible]="false">

</dxi-column>
<dxi-column dataField="subjectName" caption="Subject Name"  [visible]="false">

</dxi-column>




 
 <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
 <dxo-column-fixing [enabled]="true"></dxo-column-fixing>
 <dxo-filter-row [visible]="true"></dxo-filter-row>
 <dxo-search-panel [visible]="true"></dxo-search-panel>
 <dxo-group-panel [visible]="true"></dxo-group-panel>
 <dxo-selection mode="single"></dxo-selection>
   <dxo-export 
                [enabled]="true"
                [formats]="['xlsx', 'pdf']"
              >
              </dxo-export>
 <dxo-summary>
     <dxi-total-item
         column="question_id"
         summaryType="count">
     </dxi-total-item>
     
 </dxo-summary>

 <dxo-scrolling rowRenderingMode="virtual"> </dxo-scrolling>
 <dxo-paging [enabled]="true" [pageSize]="5"></dxo-paging>
 <dxo-header-filter [visible]="true"></dxo-header-filter>
 <dxo-pager
                [visible]="true"
                [allowedPageSizes]="[5, 10,20, 'all']"
               
                [showPageSizeSelector]="true"
               
                [showInfo]="true"
                infoText="Page {0} of  {1} ({2} items)"
                [showNavigationButtons]="true"
              >
              </dxo-pager>

</dx-data-grid>
     </div>
     <br>
     <br>
     <div class="button">
      <button class="Custombutton" type="button" matStepperNext>Next</button>
      <!-- <button class="Custombutton" type="button"  matStepperPrevious>Export</button> -->
    
    </div>
    </div>
  </mat-step>
      
  <mat-step label="Analyse Own Result">

<mat-form-field appearance="fill" class="remarks-container">
  <mat-label>Remarks </mat-label>
  <textarea matInput   class="scrollable-textarea" formControlName="remarks" class="readonly-input" readonly  ></textarea>
 
</mat-form-field>
<br>
<br>
<br>

<div class="button">
  <button class="grey-button" type="button" matStepperPrevious>Back</button>
  <!-- <button class="Custombutton" type="button"  matStepperPrevious>Export</button> -->

</div>

        </mat-step>
       
       
    
 
    
  

    </mat-horizontal-stepper>
  </form>
  </div>
  </div>
  </div>
  </div>
  </div>
  </div>
