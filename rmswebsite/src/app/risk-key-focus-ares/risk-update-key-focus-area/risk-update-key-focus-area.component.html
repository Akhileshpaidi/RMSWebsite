<div class="form">
    <div class="body">
      <div class="header">
        <div style="align-self: self-end">
          <br>
          <h2 class=" title" style="align-items: center;"> Update Key Focus Area
            </h2>
        </div>
      </div> 
      <br>
    
        <br>
        <div class="box">
           <div>

             <dx-drop-down-box 
            
             [(value)]="selectedOption1"         
             [inputAttr]="{ 'aria-label': 'Owner' }"
             placeholder="Select Key Focus Area  Name*"
             label="Select Key Focus Area Name*"
             [showClearButton]="true"
             labelMode="floating"
             valueExpr="keyfocusareaid"
             displayExpr="keyfousname"
             [(opened)]="isGridBoxOpened"
             [dataSource]="keyfocusdata"
             (onValueChanged)="getUpdateFormData($event)"
             >   
            <div *dxTemplate="let data of 'content'">
             <dx-data-grid    
             [dataSource]="keyfocusdata"
             [columns]="gridColumns1"
               [selection]="{ mode: 'single' }"
               [hoverStateEnabled]="true"
               [(selectedRowKeys)]="selectedOption1"
               [filterRow]="{ visible: true }"
               [scrolling]="{ mode: 'virtual' }"
               [showColumnHeaders]="false"
               height="100%"
             >
             <dxo-filter-row [visible]="true"></dxo-filter-row>
             <dxo-scrolling mode="virtual"></dxo-scrolling>
             <dxo-header-filter [visible]="true" [allowSearch]="true">
               <dxo-search [enabled]="true"></dxo-search>
             </dxo-header-filter>
             <dxo-paging [enabled]="true" [pageSize]="10"></dxo-paging>
             <dxo-pager
             [visible]="true"
             [allowedPageSizes]="[ 10,20, 'all']"
            
             [showPageSizeSelector]="true"
            
             [showInfo]="true"
             infoText="Page {0} of  {1} ({2} items)"
             [showNavigationButtons]="true">
           </dxo-pager>
       
           <dxo-group-panel [visible]="true"></dxo-group-panel>
             <dxo-grouping [autoExpandAll]="true"></dxo-grouping>
             </dx-data-grid>
           </div> 
          </dx-drop-down-box>
          
             </div>
        
        </div>
        <br>
        <br>
        <form [formGroup]="keyfocus"  (ngSubmit)="SubmitUpdateForm()" >

            <div class="row">
                <div class="box">
                    <mat-form-field  appearance="fill" class="form-field">
                        <mat-label>Key Foucs Area Name </mat-label>
                        <input matInput  #titleinput  formControlName="keyfousname"  maxlength="250" >
                        <mat-hint align="start" >Min 1 - Max 150 Characters</mat-hint>
                        <mat-hint align="end">{{titleinput.value.length}}/150</mat-hint> 
                      </mat-form-field>
                          </div>
                          <div class="box">
                      <mat-form-field  appearance="fill" class="form-field">
                        <mat-label>Key Foucs Area  Description </mat-label>
                        <textarea matInput   #titleinput1 formControlName="keyfousdescription" maxlength="2500" ></textarea>
                        <mat-hint align="start" >Min 1 - Max 500 Characters</mat-hint>
                        <mat-hint align="end">{{titleinput1.value.length}}/500</mat-hint> 
              
              
                      </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="box">
                    <div>
                        <dx-select-box 
                 formControlName="entity"
                 label="Select Entity Type*"
              labelMode="floating"
              valueExpr="entity_Master_id"
              displayExpr="entity_Master_Name"
              [dataSource]="Entity"  
              [searchEnabled]="true"
              (onValueChanged)="getunitlocation($event)"
              selectionMode="single" 
              placeholder=""
                 > </dx-select-box> 
                      </div>
                 
                 </div>
                 <div class="box">
                    <dx-select-box 
                    formControlName="location"
                    label="Select  unit  location*"
                    labelMode="floating"
                    valueExpr="unit_location_Master_id"
                    displayExpr="unit_location_Master_name"
                    [searchEnabled]="true"
                    [dataSource]="location"  
                    (onValueChanged)="getdepartment($event)" 
                    selectionMode="single" 
                      >    </dx-select-box>
                
                </div>
            </div>
            <br>
            <div class="row">
                <div class="box">
                    <div>
                        <dx-select-box 
                        formControlName="department"
                        label="Select Department Type *"
                        labelMode="floating"
                        valueExpr="department_Master_id"
                        displayExpr="department_Master_name"
                        [searchEnabled]="true"
                        [dataSource]="Department"  
                        (onValueChanged)="getbusiness($event)"
                        selectionMode="single" 
                          ></dx-select-box>
                      </div>
                 
                 </div>
                 <div class="box">
                 <dx-select-box 
                 formControlName="businessid"
                 label="Select Business Name*"
              labelMode="floating"
              valueExpr="riskBusinessfunctionid"
              displayExpr="riskbusinessname"
              [dataSource]="business"  
              [searchEnabled]="true"
              selectionMode="single" 
              placeholder=""
              (onValueChanged)="getbusinessprocesess($event)"
                 > </dx-select-box>
                </div>
            </div>
            <br>
            <h3>Map To</h3>

            <div class="row">
                <div class="box">
                    
                   <dx-select-box 
                   formControlName="businessProcessid"
                   label="Select Business Process Name*"
                      labelMode="floating"
                   [showClearButton]="true"
                   labelMode="floating"
                   valueExpr="businessprocessID"
                   displayExpr="businessProcessName"
                   [dataSource]="businessprocess"
                   selectionMode="single" 
                   placeholder=""
                   height="40px" >    
                </dx-select-box>
                </div>

                <div class="box">
                  <dx-select-box 
                  formControlName="bpmaturity"
                  label="Target Maturity Level"
               labelMode="floating"
               valueExpr="risk_admin_Iniassimpfactid"
               displayExpr="risk_admin_Iniassimpfactname"
               [dataSource]="bpmaturity"  
               [searchEnabled]="true"
               selectionMode="single" 
               placeholder=""
                  > </dx-select-box>
                </div>
            </div>
         <div class="margin-top"></div>
         <div class="button">
          <button class="grey-button"  (click)="Cancel()" >Cancel</button>
           <button class="Custombutton"  >Update</button>
         </div>
        </form>
    </div>
</div>

